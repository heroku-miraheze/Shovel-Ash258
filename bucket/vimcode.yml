version: 1.70.1
description: Portable code for vim education
homepage: https://code.visualstudio.com
license:
  identifier: Freeware
  url: https://code.visualstudio.com/License
changelog: https://code.visualstudio.com/updates/v1_70
depends: vim
architecture:
  64bit:
    url: https://update.code.visualstudio.com/1.70.1/win32-x64-archive/stable#/cosi.zip
    hash: d838665e6ff6e731c56391f26b1c13eeb488fb32b39ef143f9e6a2a6cbceb3aa
  32bit:
    url: https://update.code.visualstudio.com/1.70.1/win32-archive/stable#/cosi.zip
    hash: dfafc7c8e43a3a11e27d2be34dd96aadf63dc6d1a2f448fabc0af2f3e8d9befb
  arm64:
    url: https://update.code.visualstudio.com/1.70.1/win32-arm64-archive/stable#/cosi.zip
    hash: 7561c3e6a8f3c5209b62da15a1ae98b8b57e5253f98faf2f7157feed7d1039a3
pre_install: |
  if (!(Test-Path -LiteralPath "$persist_dir\data" -PathType 'Container')) {
      @('tmp', 'user-data', 'extensions') | ForEach-Object { Confirm-DirectoryExistence "$dir\data\$_" | Out-Null }
  }
post_install: |
  function installExt([String] $ext) { & "$dir\bin\code.cmd" --install-extension "$ext" }

  'vscodevim.vim', 'usernamehw.errorlens', 'equinusocio.vsc-material-theme' | ForEach-Object { installExt $_ }
bin:
- - bin\code.cmd
  - vimcode
shortcuts:
- - code.exe
  - VIM Code
persist: data
checkver:
  url: https://code.visualstudio.com/sha?build=stable
  jsonpath: $.products[?(@.platform.os == 'win32-x64-archive')].name
autoupdate:
  changelog: https://code.visualstudio.com/updates/v$majorVersion_$minorVersion
  architecture:
    64bit:
      url: https://update.code.visualstudio.com/$version/win32-x64-archive/stable#/cosi.zip
      hash:
        url: https://code.visualstudio.com/sha?build=stable
        jsonpath: $.products[?(@.platform.os == 'win32-x64-archive')].sha256hash
    32bit:
      url: https://update.code.visualstudio.com/$version/win32-archive/stable#/cosi.zip
      hash:
        url: https://code.visualstudio.com/sha?build=stable
        jsonpath: $.products[?(@.platform.os == 'win32-archive')].sha256hash
    arm64:
      url: https://update.code.visualstudio.com/$version/win32-arm64-archive/stable#/cosi.zip
      hash:
        url: https://code.visualstudio.com/sha?build=stable
        jsonpath: $.products[?(@.platform.os == 'win32-arm64-archive')].sha256hash
